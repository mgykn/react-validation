{"ast":null,"code":"import _classCallCheck from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mugeyakin/Projects/react/react-validation/src/pages/Agent/User/create.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Breadcrumb from '../../../components/breadcrumb/index';\nimport Message from '../../../components/message/index';\nimport Form from '../../../components/form/form';\nimport Button from '../../../components/form/button';\nimport { companies, createUser, dispatchItem } from '../../../actions/actions';\n\nvar UserCreate =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UserCreate, _React$Component);\n\n  function UserCreate(props) {\n    var _this;\n\n    _classCallCheck(this, UserCreate);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserCreate).call(this, props));\n    _this.state = {\n      showConfirmBackPopup: false,\n      formModel: {\n        userName: {\n          value: '',\n          name: 'userName',\n          type: 'text',\n          label: 'İsim Soyisim',\n          placeholder: 'İsim Soyisim',\n          error: 'Lütfen isim soyisim girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        },\n        userEmail: {\n          value: '',\n          name: 'userEmail',\n          type: 'text',\n          label: 'E-posta Adresi',\n          placeholder: 'E-posta adresi',\n          error: 'Lütfen geçerli bir e-posta adresi girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true,\n            email: true\n          }\n        },\n        userGsm: {\n          value: '',\n          name: 'userGsm',\n          type: 'phone',\n          label: 'Telefon Numarası',\n          placeholder: 'Telefon numarası',\n          error: 'Lütfen telefon numarası girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        }\n      }\n    };\n    _this.getCompanyList = _this.getCompanyList.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.confirmBackPopup = _this.confirmBackPopup.bind(_assertThisInitialized(_this));\n    _this.goToBack = _this.goToBack.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(UserCreate, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.app.agent.companies.length < 1) {\n        this.getCompanyList();\n      }\n    }\n  }, {\n    key: \"confirmBackPopup\",\n    value: function confirmBackPopup(state) {\n      this.setState({\n        showConfirmBackPopup: state\n      });\n    }\n  }, {\n    key: \"goToBack\",\n    value: function goToBack() {\n      var companyId = this.props.match.params.id;\n      this.props.history.push('/agent/company/detail/' + companyId + '/users');\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(data) {\n      var _this2 = this;\n\n      var companyId = this.props.match.params.id;\n      data[\"companyId\"] = companyId;\n      this.props.dispatch(createUser(data, function (data) {\n        _this2.getCompanyList(function () {\n          _this2.props.history.push('/agent/company/detail/' + companyId + '/users');\n        });\n      }, function (data) {}));\n    }\n  }, {\n    key: \"getCompanyList\",\n    value: function getCompanyList(successFunc) {\n      var _this3 = this;\n\n      this.props.dispatch(companies({}, function (data) {\n        _this3.props.dispatch(dispatchItem(\"COMPANY_LIST\", data.customerResponse));\n\n        if (successFunc) {\n          successFunc();\n        }\n      }, function () {}));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var companyId = this.props.match.params.id;\n      var filterCompany = this.props.app.agent.companies.filter(function (item) {\n        return item.companyId === companyId;\n      });\n      var company = filterCompany.length > 0 ? filterCompany[0] : null;\n      var breadcrumbItems = [{\n        name: 'Ana Sayfa',\n        link: '/'\n      }, {\n        name: 'Müşteriler',\n        link: '/agent/company/list'\n      }, {\n        name: company ? company.companyName : \"\",\n        link: '/agent/company/detail/' + (company ? company.companyId : \"\")\n      }, {\n        name: \"Kullanıcılar\",\n        link: '/agent/company/detail/' + (company ? company.companyId : \"\") + '/users'\n      }, {\n        name: 'Yeni Kullanıcı Ekleme'\n      }];\n      return [React.createElement(Breadcrumb, {\n        items: breadcrumbItems,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"section\", {\n        className: \"panel small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Message, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), company && React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title-default\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Yeni M\\xFC\\u015Fteri Ekleme\")), React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Form, {\n        model: this.state.formModel,\n        handleSubmit: this.handleSubmit,\n        smallTitle: \"Müşteri Kullanıcı Bilgileri\",\n        buttonText: \"Kullanıcı Oluştur\",\n        buttonId: \"user-create-save\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(Button, {\n        disabled: false,\n        extraClass: \"secondary\",\n        onClick: function onClick() {\n          _this4.confirmBackPopup(true);\n        },\n        text: \"İşlemi iptal et\",\n        id: \"user-create-cancel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.showConfirmBackPopup && React.createElement(\"div\", {\n        className: \"popup-wrapper active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"popup-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"popup-title small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Geri d\\xF6nmek istiyor musunuz?\"), React.createElement(\"div\", {\n        className: \"popup-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Bu i\\u015Flemi ger\\xE7ekle\\u015Ftirmek, bu alana ait veri kayb\\u0131na yol a\\xE7abilir.\"), React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        id: \"company-user-create-back-okey\",\n        className: \"btn primary\",\n        href: \"javascript:void(0)\",\n        title: \"Onayla\",\n        onClick: function onClick() {\n          _this4.goToBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Evet\")), React.createElement(\"a\", {\n        id: \"company-user-create-back-cancel\",\n        className: \"btn\",\n        href: \"javascript:void(0)\",\n        title: \"\\u0130ptal\",\n        onClick: function onClick() {\n          return _this4.confirmBackPopup(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"\\u0130ptal\")))), React.createElement(\"a\", {\n        className: \"popup-close\",\n        href: \"javascript:void(0)\",\n        onClick: function onClick() {\n          return _this4.confirmBackPopup(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require('../../../assets/icons/icon-popup-close.svg'),\n        alt: \"Kapat Ikonu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }))))];\n    }\n  }]);\n\n  return UserCreate;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    app: state.app\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(UserCreate));","map":{"version":3,"sources":["/Users/mugeyakin/Projects/react/react-validation/src/pages/Agent/User/create.js"],"names":["React","withRouter","connect","Breadcrumb","Message","Form","Button","companies","createUser","dispatchItem","UserCreate","props","state","showConfirmBackPopup","formModel","userName","value","name","type","label","placeholder","error","valid","touched","validationRules","isRequired","userEmail","email","userGsm","getCompanyList","bind","handleSubmit","confirmBackPopup","goToBack","app","agent","length","setState","companyId","match","params","id","history","push","data","dispatch","successFunc","customerResponse","filterCompany","filter","item","company","breadcrumbItems","link","companyName","require","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport Breadcrumb from '../../../components/breadcrumb/index';\nimport Message from '../../../components/message/index';\nimport Form from '../../../components/form/form';\nimport Button from '../../../components/form/button';\nimport { companies, createUser, dispatchItem } from '../../../actions/actions';\n\nclass UserCreate extends React.Component {\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            showConfirmBackPopup: false,\n            formModel: {\n                userName: {\n                    value: '',\n                    name: 'userName',\n                    type: 'text',\n                    label: 'İsim Soyisim',\n                    placeholder: 'İsim Soyisim',\n                    error: 'Lütfen isim soyisim girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true\n                    }\n                },\n                userEmail: {\n                    value: '',\n                    name: 'userEmail',\n                    type: 'text',\n                    label: 'E-posta Adresi',\n                    placeholder: 'E-posta adresi',\n                    error: 'Lütfen geçerli bir e-posta adresi girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true,\n                        email: true\n                    }\n                },\n                userGsm: {\n                    value: '',\n                    name: 'userGsm',\n                    type: 'phone',\n                    label: 'Telefon Numarası',\n                    placeholder: 'Telefon numarası',\n                    error: 'Lütfen telefon numarası girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true\n                    }\n                }\n            }\n        };\n\n        this.getCompanyList = this.getCompanyList.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.confirmBackPopup = this.confirmBackPopup.bind(this);\n        this.goToBack = this.goToBack.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.app.agent.companies.length < 1) {\n            this.getCompanyList();\n        }\n    }\n\n    confirmBackPopup(state){\n        this.setState({\n            showConfirmBackPopup: state\n        });\n    }\n\n    goToBack()\n    {\n        var companyId = this.props.match.params.id;\n        this.props.history.push('/agent/company/detail/' + companyId + '/users');\n    }\n    \n    handleSubmit(data)\n    {\n        const companyId = this.props.match.params.id;\n        data[\"companyId\"] = companyId;\n        \n        this.props.dispatch(createUser(data, (data) => {\n            this.getCompanyList(() => { this.props.history.push('/agent/company/detail/' + companyId + '/users'); });\n        }, (data) => {\n        }));\n    }\n\n    getCompanyList(successFunc) {\n        this.props.dispatch(companies({}, (data) => {\n            this.props.dispatch(dispatchItem(\"COMPANY_LIST\", data.customerResponse));\n            if(successFunc)\n            {\n                successFunc();\n            }\n        }, () => {\n\n        }));\n    }\n\n    render() {\n        var companyId = this.props.match.params.id;\n        var filterCompany = this.props.app.agent.companies.filter(function (item) {\n                            return item.companyId === companyId;\n                        });\n\n        var company = filterCompany.length > 0 ? filterCompany[0] : null;\n\n        const breadcrumbItems = [{\n            name: 'Ana Sayfa',\n            link: '/'\n        },{\n            name: 'Müşteriler',\n            link : '/agent/company/list'\n        },{\n            name: (company ? company.companyName : \"\"),\n            link : '/agent/company/detail/' + (company ? company.companyId : \"\")\n        },{\n            name: \"Kullanıcılar\",\n            link : '/agent/company/detail/' + (company ? company.companyId : \"\") + '/users'\n        },{\n            name: 'Yeni Kullanıcı Ekleme'\n        }];\n\n        return (\n            [\n            <Breadcrumb items={breadcrumbItems} />,\n            <section className=\"panel small\">\n                <Message />\n                {company && \n                    <div className=\"container\">\n                        <div className=\"title-default\">\n                            <span>Yeni Müşteri Ekleme</span>\n                        </div>\n                        <div className=\"form-container\">\n                            <Form model={this.state.formModel} handleSubmit={this.handleSubmit} smallTitle={\"Müşteri Kullanıcı Bilgileri\"} buttonText={\"Kullanıcı Oluştur\"} buttonId={\"user-create-save\"} />\n                            <Button disabled={false} extraClass={\"secondary\"} onClick={() => { this.confirmBackPopup(true) }} text={\"İşlemi iptal et\"} id={\"user-create-cancel\"} />\n                        </div>\n                    </div>\n                }\n            </section>,\n            <div>\n                {this.state.showConfirmBackPopup && \n                    <div className=\"popup-wrapper active\">\n                        <div className=\"popup-container\">\n                            <div className=\"popup-title small\">\n                                Geri dönmek istiyor musunuz?\n                            </div>\n                            <div className=\"popup-text\">\n                                Bu işlemi gerçekleştirmek, bu alana ait veri kaybına yol açabilir.\n                            </div>\n                            <div className=\"form-container\">\n                                <a id={\"company-user-create-back-okey\"} className=\"btn primary\" href=\"javascript:void(0)\" title=\"Onayla\" onClick={() => { this.goToBack() }}>\n                                    <span>Evet</span>\n                                </a>\n                                <a id={\"company-user-create-back-cancel\"} className=\"btn\" href=\"javascript:void(0)\" title=\"İptal\" onClick={() => this.confirmBackPopup(false)}>\n                                    <span>İptal</span>\n                                </a>\n                            </div>\n                        </div>\n                        <a className=\"popup-close\" href=\"javascript:void(0)\" onClick={() => this.confirmBackPopup(false)}>\n                            <img src={require('../../../assets/icons/icon-popup-close.svg')} alt=\"Kapat Ikonu\" />\n                        </a>\n                    </div>\n                }\n            </div>\n            ]\n        );\n    }\n  }\n\n  function mapStateToProps(state) {\n      return {\n          app: state.app \n      }\n  }\n\n  export default withRouter(connect(mapStateToProps)(UserCreate))"]},"metadata":{},"sourceType":"module"}
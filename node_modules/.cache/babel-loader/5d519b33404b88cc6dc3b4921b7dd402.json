{"ast":null,"code":"import _classCallCheck from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mugeyakin/Projects/react/react-validation/src/layouts/popupcontents/OtpSmsPopup.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Form from '../../components/form/form';\nimport { otpSms, dispatchItem } from '../../actions/actions';\n\nvar OtpSmsPopup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(OtpSmsPopup, _React$Component);\n\n  function OtpSmsPopup(props) {\n    var _this;\n\n    _classCallCheck(this, OtpSmsPopup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OtpSmsPopup).call(this, props));\n    _this.state = {\n      timer: 60,\n      formModel: {\n        otp: {\n          value: '',\n          name: 'otp',\n          type: 'text',\n          label: 'Sms şifresi',\n          placeholder: 'Sms şifresi',\n          error: 'Lütfen telefonunuza gelen sms şifresini girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        }\n      }\n    };\n    _this.changeActivePopup = _this.changeActivePopup.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(OtpSmsPopup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.interval = setInterval(function () {\n        _this2.setState(function (prevState) {\n          return {\n            timer: prevState.timer - 1\n          };\n        });\n      }, 1000);\n\n      if (this.props.app.loginAccessToken == '') {\n        this.changeActivePopup('login');\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.timer === 0) {\n        clearInterval(this.interval);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"changeActivePopup\",\n    value: function changeActivePopup(activePopup) {\n      this.props.dispatch(dispatchItem('POPUP', activePopup));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(data) {\n      var _this3 = this;\n\n      this.props.dispatch(otpSms(data, function (data) {\n        var accessToken = data.token;\n        var userType = data.role;\n\n        if (data.statusCode == \"0\") {\n          localStorage.setItem('user', accessToken);\n          localStorage.setItem('userType', userType);\n\n          _this3.props.dispatch(dispatchItem('ACCESS_TOKEN', {\n            accessToken: accessToken,\n            userType: userType\n          }));\n\n          _this3.props.dispatch(dispatchItem('LOGIN_ACCESS_TOKEN', accessToken));\n\n          _this3.props.dispatch(dispatchItem('POPUP', ''));\n\n          if (userType == 'Sales') {\n            _this3.props.history.push('/agent');\n          } else if (userType == 'Standart') {\n            _this3.props.history.push('/user');\n          } else if (userType == 'XIVodafone' || userType == 'XIPartner') {\n            _this3.props.history.push('/xivodafone/client/list');\n          }\n        } else if (data.statusCode == \"1\" || data.statusCode == \"2\") {\n          _this3.props.dispatch(dispatchItem('LOGIN_ACCESS_TOKEN', accessToken));\n\n          _this3.props.dispatch(dispatchItem('USER_TYPE', userType));\n\n          _this3.changeActivePopup('changePassword');\n        }\n      }, function () {}));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"popup-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"popup-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Telefonuna Gelen SMS Kodunu Gir\"), React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Form, {\n        model: this.state.formModel,\n        handleSubmit: this.handleSubmit,\n        smallTitle: \"\",\n        buttonText: \"Giriş Yap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"popup-bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"\\xA0\"), React.createElement(\"div\", {\n        className: \"popup-bottom-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Kalan s\\xFCre: \", (\"0\" + Math.floor(this.state.timer / 60)).slice(\"-2\"), \":\", (\"0\" + this.state.timer % 60).slice(\"-2\"))));\n    }\n  }]);\n\n  return OtpSmsPopup;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    app: state.app\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(OtpSmsPopup));","map":{"version":3,"sources":["/Users/mugeyakin/Projects/react/react-validation/src/layouts/popupcontents/OtpSmsPopup.js"],"names":["React","withRouter","connect","Form","otpSms","dispatchItem","OtpSmsPopup","props","state","timer","formModel","otp","value","name","type","label","placeholder","error","valid","touched","validationRules","isRequired","changeActivePopup","bind","handleSubmit","interval","setInterval","setState","prevState","app","loginAccessToken","clearInterval","activePopup","dispatch","data","accessToken","token","userType","role","statusCode","localStorage","setItem","history","push","Math","floor","slice","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport Form from '../../components/form/form';\nimport { otpSms, dispatchItem } from '../../actions/actions';\n\nclass OtpSmsPopup extends React.Component {\n    constructor(props){\n        super(props);\n\n        this.state = {\n            timer: 60,\n            formModel: {\n                otp: {\n                    value: '',\n                    name: 'otp',\n                    type: 'text',\n                    label: 'Sms şifresi',\n                    placeholder: 'Sms şifresi',\n                    error: 'Lütfen telefonunuza gelen sms şifresini girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true\n                    }\n                }\n            }\n        }\n        \n        this.changeActivePopup = this.changeActivePopup.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    componentDidMount()\n    {\n        this.interval = setInterval(\n            () => { this.setState((prevState)=> ({ timer: prevState.timer - 1 })) },\n            1000\n        );\n        \n        if(this.props.app.loginAccessToken == '')\n        {\n            this.changeActivePopup('login');\n        }\n    }\n\n    componentDidUpdate(){\n        if(this.state.timer === 0){ \n            clearInterval(this.interval);\n        }\n    }\n    \n    componentWillUnmount(){\n        clearInterval(this.interval);\n    }\n    \n    changeActivePopup(activePopup) {\n        this.props.dispatch(dispatchItem('POPUP', activePopup));\n    }\n\n    handleSubmit(data)\n    {\n        this.props.dispatch(otpSms(data, (data) => {\n            var accessToken = data.token;\n            var userType = data.role;\n            if(data.statusCode == \"0\"){\n                localStorage.setItem('user', accessToken);\n                localStorage.setItem('userType', userType);\n                this.props.dispatch(dispatchItem('ACCESS_TOKEN', { accessToken: accessToken, userType: userType }));\n                this.props.dispatch(dispatchItem('LOGIN_ACCESS_TOKEN', accessToken));\n                this.props.dispatch(dispatchItem('POPUP', ''));\n\n                if(userType ==  'Sales')\n                {\n                    this.props.history.push('/agent');   \n                }\n                else if(userType ==  'Standart')\n                {\n                    this.props.history.push('/user');   \n                }\n                else if(userType ==  'XIVodafone' || userType == 'XIPartner')\n                {\n                    this.props.history.push('/xivodafone/client/list');  \n                }\n            } else if(data.statusCode == \"1\" || data.statusCode == \"2\") {\n                this.props.dispatch(dispatchItem('LOGIN_ACCESS_TOKEN', accessToken));\n                this.props.dispatch(dispatchItem('USER_TYPE', userType));\n                this.changeActivePopup('changePassword');\n            }\n        }, () => {\n        }));\n    }\n\n    render() {\n        return (\n            <div className=\"popup-container\">\n                <div className=\"popup-title\">\n                    Telefonuna Gelen SMS Kodunu Gir\n                </div>\n                <div className=\"form-container\">\n                    <Form model={this.state.formModel} handleSubmit={this.handleSubmit} smallTitle={\"\"} buttonText={\"Giriş Yap\"} />\n                </div>\n                <div className=\"popup-bottom\">\n                    <div>&nbsp;</div>\n                    <div className=\"popup-bottom-right\">Kalan süre: {(\"0\" + Math.floor(this.state.timer / 60)).slice(\"-2\")}:{(\"0\" + (this.state.timer % 60)).slice(\"-2\")}</div>\n                </div>\n            </div>\n        );\n        }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        app: state.app \n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(OtpSmsPopup))"]},"metadata":{},"sourceType":"module"}
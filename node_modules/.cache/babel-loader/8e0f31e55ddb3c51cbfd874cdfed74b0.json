{"ast":null,"code":"import _objectSpread from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/mugeyakin/Projects/react/react-validation/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mugeyakin/Projects/react/react-validation/src/pages/Agent/Client/create.js\";\nimport React from 'react';\nimport { BrowserRouter as Router, Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Message from '../../../components/message/index';\nimport Form from '../../../components/form/form';\nimport { createClient, partners, dispatchItem } from '../../../actions/actions';\n\nvar ClientCreate =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ClientCreate, _React$Component);\n\n  function ClientCreate(props) {\n    var _this;\n\n    _classCallCheck(this, ClientCreate);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ClientCreate).call(this, props));\n    var partnerOptions = [];\n\n    for (var i = 0; i < _this.props.app.xivodafone.partners.length; i++) {\n      partnerOptions.push({\n        name: _this.props.app.xivodafone.partners[i].partnerName,\n        value: _this.props.app.xivodafone.partners[i].partnerId\n      });\n    }\n\n    _this.state = {\n      formModel: {\n        partnerId: {\n          value: '',\n          name: 'partnerId',\n          type: 'select',\n          label: 'Partner Adı',\n          placeholder: 'Lütfen seçiniz',\n          options: partnerOptions,\n          error: 'Lütfen partner adı girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        },\n        companyName: {\n          value: '',\n          name: 'companyName',\n          type: 'text',\n          label: 'Müşteri Adı',\n          placeholder: '',\n          error: 'Lütfen müşteri adı girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        },\n        contractStartDate: {\n          value: '',\n          name: 'contractStartDate',\n          type: 'textdate',\n          label: 'Sözleşme Başlangıç Tarihi',\n          placeholder: '',\n          error: 'Lütfen sözleşme başlangıç tarihi girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true,\n            isDate: true\n          }\n        },\n        sector: {\n          value: 'Kamu',\n          name: 'sector',\n          type: 'radio',\n          label: '',\n          placeholder: '',\n          options: [{\n            name: \"Kamu\",\n            value: \"Kamu\"\n          }, {\n            name: \"Özel\",\n            value: \"Ozel\"\n          }],\n          error: 'Lütfen tip girin.',\n          valid: false,\n          touched: false,\n          disabled: true,\n          validationRules: {}\n        },\n        originator: {\n          value: '',\n          name: 'originator',\n          type: 'text',\n          maxLength: 11,\n          label: 'Gönderici Adı',\n          placeholder: '',\n          error: 'Lütfen Gönderici Adı girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        },\n        limit: {\n          value: '',\n          name: 'limit',\n          type: 'number',\n          label: 'Limit',\n          min: 1,\n          max: 1000000,\n          placeholder: '',\n          error: 'Lütfen limit girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true,\n            isDecimal: true\n          }\n        },\n        file: {\n          value: '',\n          valuePlaceholder: '',\n          name: 'file',\n          type: 'file',\n          label: 'Sözleşme Ekle',\n          placeholder: 'Bilgisayarınızdan seçim yapmak için tıklayın',\n          error: 'Lütfen bir Sözleşme Ekleyin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        }\n      }\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.onInputChange = _this.onInputChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ClientCreate, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.props.app.xivodafone.partners.length < 1) {\n        this.props.dispatch(partners({}, function (data) {\n          _this2.props.dispatch(dispatchItem(\"PARTNER_LIST\", data.Partners));\n        }, function () {}));\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.app.xivodafone.partners !== nextProps.app.xivodafone.partners) {\n        var partnerOptions = [];\n\n        for (var i = 0; i < nextProps.app.xivodafone.partners.length; i++) {\n          partnerOptions.push({\n            name: nextProps.app.xivodafone.partners[i].partnerName,\n            value: nextProps.app.xivodafone.partners[i].partnerId\n          });\n        }\n\n        this.setState({\n          formModel: _objectSpread({}, this.state.formModel, {\n            partnerId: _objectSpread({}, this.state.formModel.partnerId, {\n              options: partnerOptions\n            })\n          })\n        });\n      }\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(model) {\n      if (model.limit.value <= 0 || 'e'.indexOf(model.limit.value) > 0) {\n        this.setState({\n          formModel: _objectSpread({}, this.state.formModel, {\n            limit: _objectSpread({}, this.state.formModel.limit, {\n              value: ''\n            })\n          })\n        });\n      }\n\n      if (model.sector.value == \"Ozel\") {\n        this.setState({\n          formModel: _objectSpread({}, this.state.formModel, {\n            originator: _objectSpread({}, this.state.formModel.originator, {\n              value: '',\n              placeholder: 'VODAFONE',\n              disabled: true\n            })\n          })\n        });\n      } else {\n        this.setState({\n          formModel: _objectSpread({}, this.state.formModel, {\n            originator: _objectSpread({}, this.state.formModel.originator, {\n              placeholder: 'Gönderici Adı',\n              disabled: false\n            })\n          })\n        });\n      }\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(data) {\n      var _this3 = this;\n\n      var serviceData = new FormData();\n\n      for (var key in data) {\n        serviceData.append(key, data[key]);\n      }\n\n      this.props.dispatch(createClient(serviceData, function (data) {\n        if (data.status == \"SUCCESS\") {\n          setTimeout(function () {\n            //Start the timer\n            window.location.reload();\n          }.bind(_this3), 2000);\n        }\n      }, function (data) {}));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"section\", {\n        className: \"panel small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(Message, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title-default\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/agent/partner/create\",\n        className: \"title-link small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Yeni Partner Ekle\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Yeni M\\xFC\\u015Fteri Ekle\")), React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(Form, {\n        model: this.state.formModel,\n        handleSubmit: this.handleSubmit,\n        onInputChange: this.onInputChange,\n        buttonText: \"Müşteri Ekle\",\n        buttonId: \"client-create-save\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return ClientCreate;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    app: state.app\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(ClientCreate));","map":{"version":3,"sources":["/Users/mugeyakin/Projects/react/react-validation/src/pages/Agent/Client/create.js"],"names":["React","BrowserRouter","Router","Link","withRouter","connect","Message","Form","createClient","partners","dispatchItem","ClientCreate","props","partnerOptions","i","app","xivodafone","length","push","name","partnerName","value","partnerId","state","formModel","type","label","placeholder","options","error","valid","touched","validationRules","isRequired","companyName","contractStartDate","isDate","sector","disabled","originator","maxLength","limit","min","max","isDecimal","file","valuePlaceholder","handleSubmit","bind","onInputChange","dispatch","data","Partners","nextProps","setState","model","indexOf","serviceData","FormData","key","append","status","setTimeout","window","location","reload","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Link, withRouter\n} from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Message from '../../../components/message/index';\nimport Form from '../../../components/form/form';\nimport { createClient, partners, dispatchItem } from '../../../actions/actions';\n\nclass ClientCreate extends React.Component {\n    constructor(props) {\n        super(props);\n\n        var partnerOptions = [];\n\n        for (var i = 0; i < this.props.app.xivodafone.partners.length; i++) {\n            partnerOptions.push({\n                name: this.props.app.xivodafone.partners[i].partnerName,\n                value: this.props.app.xivodafone.partners[i].partnerId\n            });\n        }\n\n        this.state = {\n            formModel: {\n                partnerId: {\n                    value: '',\n                    name: 'partnerId',\n                    type: 'select',\n                    label: 'Partner Adı',\n                    placeholder: 'Lütfen seçiniz',\n                    options: partnerOptions,\n                    error: 'Lütfen partner adı girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true\n                    }\n                },\n                companyName: {\n                    value: '',\n                    name: 'companyName',\n                    type: 'text',\n                    label: 'Müşteri Adı',\n                    placeholder: '',\n                    error: 'Lütfen müşteri adı girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true\n                    }\n                },\n                contractStartDate: {\n                    value: '',\n                    name: 'contractStartDate',\n                    type: 'textdate',\n                    label: 'Sözleşme Başlangıç Tarihi',\n                    placeholder: '',\n                    error: 'Lütfen sözleşme başlangıç tarihi girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true,\n                        isDate: true\n                    }\n                },\n                sector: {\n                    value: 'Kamu',\n                    name: 'sector',\n                    type: 'radio',\n                    label: '',\n                    placeholder: '',\n                    options: [\n                        {\n                            name: \"Kamu\",\n                            value: \"Kamu\"\n                        },\n                        {\n                            name: \"Özel\",\n                            value: \"Ozel\"\n                        }\n                    ],\n                    error: 'Lütfen tip girin.',\n                    valid: false,\n                    touched: false,\n                    disabled: true,\n                    validationRules: {\n                    }\n                },\n                originator: {\n                    value: '',\n                    name: 'originator',\n                    type: 'text',\n                    maxLength: 11,\n                    label: 'Gönderici Adı',\n                    placeholder: '',\n                    error: 'Lütfen Gönderici Adı girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true\n                    }\n                },\n                limit: {\n                    value: '',\n                    name: 'limit',\n                    type: 'number',\n                    label: 'Limit',\n                    min: 1,\n                    max: 1000000,\n                    placeholder: '',\n                    error: 'Lütfen limit girin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true,\n                        isDecimal: true\n                    }\n                },\n                file: {\n                    value: '',\n                    valuePlaceholder: '',\n                    name: 'file',\n                    type: 'file',\n                    label: 'Sözleşme Ekle',\n                    placeholder: 'Bilgisayarınızdan seçim yapmak için tıklayın',\n                    error: 'Lütfen bir Sözleşme Ekleyin.',\n                    valid: false,\n                    touched: false,\n                    validationRules: {\n                        isRequired: true\n                    }\n                }\n            }\n        };\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.onInputChange = this.onInputChange.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.app.xivodafone.partners.length < 1) {\n            this.props.dispatch(partners({}, (data) => {\n                this.props.dispatch(dispatchItem(\"PARTNER_LIST\", data.Partners));\n            }, () => {\n\n            }));\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.app.xivodafone.partners !== nextProps.app.xivodafone.partners) {\n            var partnerOptions = [];\n\n            for (var i = 0; i < nextProps.app.xivodafone.partners.length; i++) {\n                partnerOptions.push({\n                    name: nextProps.app.xivodafone.partners[i].partnerName,\n                    value: nextProps.app.xivodafone.partners[i].partnerId\n                });\n            }\n\n            this.setState({\n                formModel: {\n                    ...this.state.formModel,\n                    partnerId: {\n                        ...this.state.formModel.partnerId,\n                        options: partnerOptions\n                    }\n                }\n            });\n        }\n    }\n\n    onInputChange(model) {\n\n        if (model.limit.value <= 0 || 'e'.indexOf(model.limit.value) > 0) {\n            this.setState({\n                formModel: {\n                    ...this.state.formModel,\n                    limit: {\n                        ...this.state.formModel.limit,\n                        value: ''\n\n                    }\n                }\n            });\n\n        }\n\n\n        if (model.sector.value == \"Ozel\") {\n            this.setState({\n                formModel: {\n                    ...this.state.formModel,\n                    originator: {\n                        ...this.state.formModel.originator,\n                        value: '',\n                        placeholder: 'VODAFONE',\n                        disabled: true\n                    }\n                }\n            });\n        }\n        else {\n            this.setState({\n                formModel: {\n                    ...this.state.formModel,\n                    originator: {\n                        ...this.state.formModel.originator,\n                        placeholder: 'Gönderici Adı',\n                        disabled: false\n                    }\n                }\n            });\n        }\n\n    }\n\n    handleSubmit(data) {\n        var serviceData = new FormData();\n        for (var key in data) {\n            serviceData.append(key, data[key]);\n        }\n\n        this.props.dispatch(createClient(serviceData, (data) => {\n            if(data.status == \"SUCCESS\") {\n                setTimeout(function() { //Start the timer\n                    window.location.reload();\n                }.bind(this), 2000)\n            }\n        }, (data) => {\n        }));\n    }\n\n    render() {\n        return (\n            <section className=\"panel small\">\n                <Message />\n                <div className=\"container\">\n                    <div className=\"title-default\">\n                        <Link to={\"/agent/partner/create\"} className=\"title-link small\">\n                            Yeni Partner Ekle\n                        </Link>\n                        <span>Yeni Müşteri Ekle</span>\n                    </div>\n                    <div className=\"form-container\">\n                        <Form model={this.state.formModel} handleSubmit={this.handleSubmit} onInputChange={this.onInputChange} buttonText={\"Müşteri Ekle\"} buttonId={\"client-create-save\"} />\n                    </div>\n                </div>\n            </section>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        app: state.app\n    }\n}\n\nexport default withRouter(connect(mapStateToProps)(ClientCreate))"]},"metadata":{},"sourceType":"module"}
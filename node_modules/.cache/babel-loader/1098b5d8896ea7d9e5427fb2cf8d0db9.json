{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\taertan\\\\git\\\\onemessaging\\\\src\\\\layouts\\\\popupcontents\\\\LoginPopup.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Form from '../../components/form/form';\nimport { login, dispatchItem } from '../../actions/actions';\n\nvar LoginPopup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginPopup, _React$Component);\n\n  function LoginPopup(props) {\n    var _this;\n\n    _classCallCheck(this, LoginPopup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPopup).call(this, props));\n    _this.state = {\n      userType: 'Standart',\n      formModelStandart: {\n        email: {\n          value: '',\n          name: 'email',\n          type: 'text',\n          label: 'E-posta Adresi',\n          placeholder: 'E-posta adresiniz',\n          error: 'Lütfen geçerli bir e-posta adresi girin.',\n          autofocus: true,\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true,\n            email: true\n          }\n        },\n        password: {\n          value: '',\n          name: 'password',\n          type: 'password',\n          label: 'Şifre',\n          placeholder: 'Şifreniz',\n          error: 'Lütfen şifrenizi girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        }\n      },\n      formModelSales: {\n        email: {\n          value: '',\n          name: 'email',\n          type: 'text',\n          label: 'Kullanıcı Adı',\n          placeholder: 'Kullanıcı adınız',\n          error: 'Lütfen kullanıcı adınızı girin.',\n          autofocus: true,\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        },\n        password: {\n          value: '',\n          name: 'password',\n          type: 'password',\n          label: 'Şifre',\n          placeholder: 'Şifreniz',\n          error: 'Lütfen şifrenizi girin.',\n          valid: false,\n          touched: false,\n          validationRules: {\n            isRequired: true\n          }\n        }\n      }\n    };\n    _this.changeActivePopup = _this.changeActivePopup.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.changeUserType = _this.changeUserType.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(LoginPopup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var accessTokenStored = localStorage.getItem('user');\n      var userTypeStored = localStorage.getItem('userType');\n\n      if (accessTokenStored !== null && userTypeStored !== null) {\n        this.changeActivePopup('');\n      } else {\n        localStorage.removeItem('user');\n        localStorage.removeItem('userType');\n      }\n\n      var emailInputs = document.getElementsByName('email');\n\n      if (emailInputs.length > 0) {\n        emailInputs[0].focus();\n      }\n    }\n  }, {\n    key: \"changeActivePopup\",\n    value: function changeActivePopup(activePopup) {\n      this.props.dispatch(dispatchItem('POPUP', activePopup));\n    }\n  }, {\n    key: \"changeUserType\",\n    value: function changeUserType(type) {\n      var _this2 = this;\n\n      if (type == 'Standart') {\n        this.setState({\n          formModelSales: _objectSpread({}, this.state.formModelSales, {\n            email: _objectSpread({}, this.state.formModelSales.email, {\n              value: '',\n              valid: false,\n              touched: false\n            }),\n            password: _objectSpread({}, this.state.formModelSales.password, {\n              value: '',\n              valid: false,\n              touched: false\n            })\n          })\n        }, function () {\n          _this2.setState({\n            userType: type\n          }, function () {\n            var emailInputs = document.getElementsByName('email');\n\n            if (emailInputs.length > 0) {\n              emailInputs[0].focus();\n            }\n          });\n        });\n      } else {\n        this.setState({\n          formModelStandart: _objectSpread({}, this.state.formModelStandart, {\n            email: _objectSpread({}, this.state.formModelStandart.email, {\n              value: '',\n              valid: false,\n              touched: false\n            }),\n            password: _objectSpread({}, this.state.formModelStandart.password, {\n              value: '',\n              valid: false,\n              touched: false\n            })\n          })\n        }, function () {\n          _this2.setState({\n            userType: type\n          }, function () {\n            var emailInputs = document.getElementsByName('email');\n\n            if (emailInputs.length > 0) {\n              emailInputs[0].focus();\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(data) {\n      var _this3 = this;\n\n      localStorage.setItem('userEmail', data.email);\n      this.props.dispatch(dispatchItem('USER_EMAIL', data.email));\n      this.props.dispatch(login(data, function (data) {\n        var userType = data.role;\n\n        if (userType != _this3.state.userType) {\n          var notification = {\n            message: 'Yanlış alandan giriş yaptınız.',\n            isError: true\n          };\n\n          _this3.props.dispatch(dispatchItem('NOTIFICATION', notification));\n        } else {\n          var loginAccessToken = data.token;\n\n          _this3.props.dispatch(dispatchItem('LOGIN_ACCESS_TOKEN', loginAccessToken));\n\n          _this3.changeActivePopup('otpSms');\n        }\n      }, function (data) {}));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"popup-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"popup-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"One Messaging'e Giri\\u015F Yap\"), React.createElement(\"div\", {\n        className: \"tabs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tab-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: this.state.userType == \"Standart\" ? \"active\" : \"\",\n        href: \"javascript:void(0)\",\n        onClick: function onClick() {\n          return _this4.changeUserType('Standart');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Kurumsal M\\xFC\\u015Fteri\"), React.createElement(\"a\", {\n        className: this.state.userType == \"Sales\" ? \"active\" : \"\",\n        href: \"javascript:void(0)\",\n        onClick: function onClick() {\n          return _this4.changeUserType('Sales');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Vodafone Temsilcisi\")), React.createElement(\"div\", {\n        className: \"tab-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, this.state.userType == \"Sales\" && React.createElement(\"div\", {\n        className: \"tab-item active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Form, {\n        model: this.state.formModelSales,\n        handleSubmit: this.handleSubmit,\n        smallTitle: \"\",\n        showGoogleRecaptcha: \"false\",\n        buttonText: \"İlerle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }))), this.state.userType == \"Standart\" && React.createElement(\"div\", {\n        className: \"tab-item active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Form, {\n        model: this.state.formModelStandart,\n        handleSubmit: this.handleSubmit,\n        smallTitle: \"\",\n        showGoogleRecaptcha: \"false\",\n        buttonText: \"İlerle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"popup-bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:void(0)\",\n        onClick: function onClick() {\n          return _this4.changeActivePopup('forgotPassword');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"\\u015Eifremi Unuttum\"))))));\n    }\n  }]);\n\n  return LoginPopup;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    app: state.app\n  };\n}\n\nexport default connect(mapStateToProps)(LoginPopup);","map":{"version":3,"sources":["C:\\Users\\taertan\\git\\onemessaging\\src\\layouts\\popupcontents\\LoginPopup.js"],"names":["React","connect","Form","login","dispatchItem","LoginPopup","props","state","userType","formModelStandart","email","value","name","type","label","placeholder","error","autofocus","valid","touched","validationRules","isRequired","password","formModelSales","changeActivePopup","bind","handleSubmit","changeUserType","accessTokenStored","localStorage","getItem","userTypeStored","removeItem","emailInputs","document","getElementsByName","length","focus","activePopup","dispatch","setState","data","setItem","role","notification","message","isError","loginAccessToken","token","Component","mapStateToProps","app"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Form from '../../components/form/form';\r\nimport { login, dispatchItem } from '../../actions/actions';\r\n\r\nclass LoginPopup extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            userType: 'Standart',\r\n            formModelStandart: {\r\n                email: {\r\n                    value: '',\r\n                    name: 'email',\r\n                    type: 'text',\r\n                    label: 'E-posta Adresi',\r\n                    placeholder: 'E-posta adresiniz',\r\n                    error: 'Lütfen geçerli bir e-posta adresi girin.',\r\n                    autofocus:true,\r\n                    valid: false,\r\n                    touched: false,\r\n                    validationRules: {\r\n                        isRequired: true,\r\n                        email: true\r\n                    }\r\n                },\r\n                password: {\r\n                    value: '',\r\n                    name: 'password',\r\n                    type: 'password',\r\n                    label: 'Şifre',\r\n                    placeholder: 'Şifreniz',\r\n                    error: 'Lütfen şifrenizi girin.',\r\n                    valid: false,\r\n                    touched: false,\r\n                    validationRules: {\r\n                        isRequired: true\r\n                    }\r\n                }\r\n            },\r\n            formModelSales: {\r\n                email: {\r\n                    value: '',\r\n                    name: 'email',\r\n                    type: 'text',\r\n                    label: 'Kullanıcı Adı',\r\n                    placeholder: 'Kullanıcı adınız',\r\n                    error: 'Lütfen kullanıcı adınızı girin.',\r\n                    autofocus:true,\r\n                    valid: false,\r\n                    touched: false,\r\n                    validationRules: {\r\n                        isRequired: true\r\n                    }\r\n                },\r\n                password: {\r\n                    value: '',\r\n                    name: 'password',\r\n                    type: 'password',\r\n                    label: 'Şifre',\r\n                    placeholder: 'Şifreniz',\r\n                    error: 'Lütfen şifrenizi girin.',\r\n                    valid: false,\r\n                    touched: false,\r\n                    validationRules: {\r\n                        isRequired: true\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.changeActivePopup = this.changeActivePopup.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.changeUserType =  this.changeUserType.bind(this);\r\n    }\r\n\r\n    componentDidMount()\r\n    {\r\n        var accessTokenStored = localStorage.getItem('user');\r\n        var userTypeStored = localStorage.getItem('userType');\r\n        if(accessTokenStored !== null && userTypeStored !== null)\r\n        {\r\n            this.changeActivePopup('');\r\n        }\r\n        else {\r\n            localStorage.removeItem('user');\r\n            localStorage.removeItem('userType');\r\n        }\r\n\r\n        var emailInputs = document.getElementsByName('email');\r\n        if(emailInputs.length > 0)\r\n        {\r\n            emailInputs[0].focus();\r\n        }\r\n    }\r\n    \r\n    changeActivePopup(activePopup) {\r\n        this.props.dispatch(dispatchItem('POPUP', activePopup));\r\n    }\r\n\r\n    changeUserType(type)\r\n    {\r\n        if(type == 'Standart')\r\n        {\r\n            this.setState({\r\n                formModelSales: {\r\n                    ...this.state.formModelSales,\r\n                    email: {\r\n                        ...this.state.formModelSales.email,\r\n                        value: '',\r\n                        valid: false,\r\n                        touched: false\r\n                    },\r\n                    password: {\r\n                        ...this.state.formModelSales.password,\r\n                        value: '',\r\n                        valid: false,\r\n                        touched: false\r\n                    }\r\n                } \r\n            }, () => {\r\n                this.setState({\r\n                    userType: type\r\n                }, () => {\r\n                    var emailInputs = document.getElementsByName('email');\r\n                    if(emailInputs.length > 0)\r\n                    {\r\n                        emailInputs[0].focus();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                formModelStandart: {\r\n                    ...this.state.formModelStandart,\r\n                    email: {\r\n                        ...this.state.formModelStandart.email,\r\n                        value: '',\r\n                        valid: false,\r\n                        touched: false\r\n                    },\r\n                    password: {\r\n                        ...this.state.formModelStandart.password,\r\n                        value: '',\r\n                        valid: false,\r\n                        touched: false\r\n                    }\r\n                } \r\n            }, () => {\r\n                this.setState({\r\n                    userType: type\r\n                }, () => {\r\n                    var emailInputs = document.getElementsByName('email');\r\n                    if(emailInputs.length > 0)\r\n                    {\r\n                        emailInputs[0].focus();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n    handleSubmit(data)\r\n    {\r\n        localStorage.setItem('userEmail', data.email);\r\n        this.props.dispatch(dispatchItem('USER_EMAIL', data.email));\r\n        \r\n        this.props.dispatch(login(data, (data) => {\r\n            var userType = data.role;\r\n            if(userType != this.state.userType)\r\n            {\r\n                var notification = {\r\n                    message: 'Yanlış alandan giriş yaptınız.',\r\n                    isError: true\r\n                }\r\n                this.props.dispatch(dispatchItem('NOTIFICATION', notification))\r\n            }\r\n            else {\r\n                var loginAccessToken = data.token;\r\n                this.props.dispatch(dispatchItem('LOGIN_ACCESS_TOKEN', loginAccessToken));\r\n\r\n                this.changeActivePopup('otpSms');\r\n            }\r\n        }, (data) => {\r\n        }));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"popup-container\">\r\n                <div className=\"popup-title\">\r\n                    One Messaging'e Giriş Yap\r\n                </div>\r\n\r\n                <div className=\"tabs\">\r\n                    <div className=\"tab-menu\">\r\n                        <a className={this.state.userType == \"Standart\" ? \"active\" :  \"\"} href=\"javascript:void(0)\" onClick={() => this.changeUserType('Standart')}>Kurumsal Müşteri</a>\r\n                        <a className={this.state.userType == \"Sales\" ? \"active\" :  \"\"} href=\"javascript:void(0)\" onClick={() => this.changeUserType('Sales')}>Vodafone Temsilcisi</a>\r\n                    </div>\r\n                    <div className=\"tab-container\">\r\n                        {this.state.userType == \"Sales\" &&\r\n                            <div className=\"tab-item active\">\r\n                                <div className=\"form-container\">\r\n                                    <Form model={this.state.formModelSales} handleSubmit={this.handleSubmit} smallTitle={\"\"} showGoogleRecaptcha={\"false\"} buttonText={\"İlerle\"} />\r\n                                </div>\r\n                            </div>\r\n                        }\r\n                        {this.state.userType == \"Standart\" &&\r\n                            <div className=\"tab-item active\">\r\n                                <div className=\"form-container\">\r\n                                    <Form model={this.state.formModelStandart} handleSubmit={this.handleSubmit} smallTitle={\"\"} showGoogleRecaptcha={\"false\"} buttonText={\"İlerle\"} />\r\n                                </div>\r\n                                <div className=\"popup-bottom\">\r\n                                    <a href=\"javascript:void(0)\" onClick={() => this.changeActivePopup('forgotPassword')}>\r\n                                        Şifremi Unuttum\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n        }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        app: state.app \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(LoginPopup)"]},"metadata":{},"sourceType":"module"}